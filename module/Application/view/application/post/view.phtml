<h3><?php echo $title; ?></h3>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">
            <strong><?php echo $post->getTitle(); ?></strong>
            <span class="pull-right">par <strong><?php echo $post->getAuthor()->getUsername(); ?></strong></span>
        </h3>
    </div>
    <div class="panel-body">
        <p><?php echo nl2br($post->getContent()); ?>
        <?php
        if($post->getDateCreate() != $post->getDateEdit()) {
            ?>
            <p><em>Dernière modification le <?php echo $post->getDateEdit()->format('d\/m\/Y\ \à\ H\:i'); ?></em></p>
            <?php
        }
        ?>
    </div>
    <div class="panel-footer">
        <p class="panel-title">
            <span class="zf-green">Posté le <?php echo $post->getDateCreate()->format('d\/m\/Y\ \à\ H\:i'); ?></span>
            <img class="pull-right" src="<?php echo $this->basePath('img/zf2-logo.png') ?>" alt="ZF2" />
        </p>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commentaires (<?php echo $nb_comment ?>)</h3>
    </div>
    <div class="panel-body">
        
        <?php 
        if ( $nb_comment == 0) { 
        ?>
            <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Pas de commentaire</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><a class="btn btn-success" href="">Postez un commentaire</a></td>
                </tr>
            </tbody>
        </table>
        <?php
        }
        else {
        ?>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Pseudo</th>
                        <th>Commentaire</th>
                    </tr>
                </thead>
                <tbody>
        <?php
            foreach($this->comment as $comment) {
        ?>
            <tr>
                    <td><strong><?php echo $comment->getAuthorName; ?></strong></td>
                    <td><span class="zf-green">Posté le <?php $date = $comment->getDateCreate(); echo $date->format('d\/m\/Y\ \à\ H\:i'); ?></span></td>
            </tr>
            <tr>
                    <td><?php // echo $this->gravatar($comment['author']['email']); ?></td>
                    <td><?php echo nl2br($comment->getContent()) ; ?></td>
            </tr>
        <?php
            } //foreach
        ?>
                </tbody>
            </table>
        <?php
        } // else
        ?>

        <div class="text-center">
            <ul class="pagination">
                <?php
                // Page précédente
                if($this->page == 1) {
                    echo '<li class="disabled"><a href="#">&laquo;</a></li>';
                }
                else {
                    echo '<li><a href="'.$this->url('post', array('page' => ($this->page - 1))).'">&laquo;</a></li>';
                }

                // Liste des pages
                for($i = 1; $i <= $nb_pages; ++$i) {
                    echo '<li'.(($i == $this->page) ? ' class="active"' : '').'>'
                       . '<a href="'.$this->url('post', array('page' => $i)).'">'.$i.'</a>'
                       . '</li>';
                }

                // Page suivante
                if($this->page == $this->nb_pages) {
                    echo '<li class="disabled"><a href="#">&raquo;</a></li>';
                }
                else {
                    echo '<li><a href="'.$this->url('post', array('page' => ($this->page + 1))).'">&raquo;</a></li>';
                }
                ?>
            </ul>
        </div>
    </div>
    <div class="panel-footer">
        <!--TODO : formulaire d'ajout de commentaires -->
    </div>
</div>